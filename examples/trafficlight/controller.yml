device:
  name: Controller
  behavior:
    - [setup, blink]
    - [setup, main_go]
    - [main_go, main_slow]
    - [main_go, off]
    - [main_slow, sec_go]
    - [main_slow, off]
    - [sec_go, sec_slow]
    - [sec_go, off]
    - [sec_slow, main_go]
    - [sec_slow, off]
    - [off, setup]
    - [blink, blink]
    - [blink, off]
  components:
    main_rd: TrafficLight
    sec_rd: TrafficLight
    t: Timer
  events:
    - setup:
        start: True
        final: False
        micro: t.begin
    - main_go:
        start: False
        final: False
        micro:
          seq: [t.timeout, main_rd.green, sec_rd.red, t.begin]
    - main_slow:
        start: False
        final: False
        micro:
          seq: [t.timeout, main_rd.yellow, t.begin]
    - sec_go:
        start: False
        final: False
        micro:
          seq: [t.timeout, main_rd.red, sec_rd.green, t.begin]
    - sec_slow:
        start: False
        final: False
        micro:
          seq: [t.timeout, sec_rd.yellow, t.begin]
    - off:
        start: False
        final: True
        micro:
          seq: [t.timeout, main_rd.off, sec_rd.off]
    - blink:
        start: False
        final: False
        micro:
          seq: [t.timeout, main_rd.yellow, sec_rd.yellow, t.begin, t.timeout, main_rd.off, sec_rd.off, t.begin]