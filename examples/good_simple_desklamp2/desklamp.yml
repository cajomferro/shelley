device:
  name: DeskLamp
  behavior:
    - [level1, off]
    - [off, level1]
  components:
    l: LedStrict
    b: SimpleButton
  events:
    level1:
        start: True
        micro: [b.press, l.on]
    off:
        micro: [b.press, l.off]

test_macro:
  ok:
    valid1: [level1, off]
    valid2: [level1, off, level1, off]
    valid3: [level1, off, level1]
  fail:
    invalid1: [off]
    invalid2: [level1, level1]

test_micro:
  ok:
    valid1: [b.press, l.on, b.press, l.off]
  fail:
    invalid1: [l.on, b.press, l.off]
    invalid2: [l.on, l.off, b.press]
    invalid3: [b.press, l.on, l.off]
    invalid4: [b.press, l.off, l.on]
    invalid5: [b.press, l.on, b.press, l.on]