device:
  name: SmartButton
  components:
    b: PressedButton
    t: Timer
  events:
    single:
        next: $ANY
        start: True
        micro: [b.in, t.start, b.out, t.cancel, t.start, t.timeout]
        # micro: [b.in, t.start, b.out, t.timeout, t.start, t.timeout] e se omitir isto?
    double:
        next: $ANY
        start: True
        micro:
          - [ b.in, t.start, b.out, t.cancel, t.start, b.in]
          - xor:
              - [t.cancel, b.out]
              - [b.out, t.cancel]

test_macro:
  ok:
    single: [single]
    double: [single]
    single_single: [single, single]
    single_dobule: [single, double]
    dobule_single: [double, single]
    dobule_double: [double, double]
  fail:
    invalid: false

test_micro:
  ok:
    single: [b.in, t.start, b.out, t.cancel, t.start, t.timeout]
    double_a: [b.in, t.start, b.out, t.cancel, t.start, b.in, t.cancel, b.out]
    double_b: [b.in, t.start, b.out, t.cancel, t.start, b.in, b.out, t.cancel]
    single_double_a: [b.in, t.start, b.out, t.cancel, t.start, t.timeout, b.in, t.start, b.out, t.cancel, t.start, b.in, t.cancel, b.out]
    single_double_b: [b.in, t.start, b.out, t.cancel, t.start, t.timeout, b.in, t.start, b.out, t.cancel, t.start, b.in, b.out, t.cancel]
  fail:
    single_missing_timeout: [b.in, t.start, b.out, t.cancel, t.start] #, t.timeout]
    invalid: false
    empty: []
