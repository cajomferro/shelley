device:
  name: DeskLamp
  behavior:
    - [level1, level2]
    - [level2, off]
    - [off, level1]
  components:
    ledA: LedStrict
    ledB: LedStrict
    b: SimpleButton
  events:
    level1:
        start: True
        micro: [b.press, ledA.on]
    level2:
        micro: [b.press, ledB.on]
    off:
        micro:
          - [b.press]
          - xor:
              - [ledB.off, ledA.off]
              - [ledA.off, ledB.off]

test_micro:
  ok:
    valid1: [b.press, ledA.on, b.press, ledB.on, b.press, ledB.off, ledA.off]
    valid2: [b.press, ledA.on, b.press, ledB.on, b.press, ledA.off, ledB.off]
  fail:
    # wrong order for leds
    invalid1: [b.press, ledB.on, b.press, ledA.on, b.press, ledB.off, ledA.off]