name: Controller
start_with: [init]
end_with: [dir1go, dir2go, police]
components:
  dir1: TrafficController
  dir2: TrafficController
operations:
  init:
    next: [dir2go]
    micro:
      - dir2.halt
  dir1go:
    next: [dir2go]
    micro:
      - xor:
        - [dir1.run, dir2.halt]
        - [dir2.halt, dir1.run]
  dir2go:
    next: [dir1go, police]
    micro:
      - xor:
        - [dir1.halt, dir2.run]
        - [dir2.run, dir1.halt]
  police:
    next: [police, dir1go]
    micro:
      - xor:
        - [dir1.police, dir2.police]
        - [dir2.police, dir1.police]
